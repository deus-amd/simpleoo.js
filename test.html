<script>

//This is just for the purposes of this test file; in a real application you should use an AMD loader
//such as this: https://github.com/cujojs/curl
var simpleoo;
function define(dependencies, definition) {
	simpleoo = definition();
}

</script>
<script src="simpleoo.js"></script>
<script>

var log = console.log;
var extend = simpleoo.extend;
var mixin = simpleoo.mixin;

function Pet(name) {
	this.name = name || null;
}
Pet.prototype = {
	eat: function() { console.log('yum'); }
};

function Cat() {
	Pet.apply(this, arguments);
}

Cat.prototype = extend(Pet.prototype, {
   //eat: function() { console.log('overridden eat'); },
   meow: function() { console.log('meow'); }	
});

var garfield = new Cat('Garfield');


log(garfield.name);

log(garfield);

garfield.eat();
garfield.meow();

log(garfield instanceof Cat); //true
log(garfield instanceof Pet); //true


function Person() {
}

function Student() {}
Student.prototype = extend(Person, {
	study: function() { console.log('study'); }
});

function Employee() {}
Employee.prototype = extend(Person, {
	work: function() { console.log('work'); }
});

var fred = new Person();

//Fred is both a student and an employee
mixin(fred, Student.prototype, Employee.prototype);

//only works in browsers supporting ECMAScript 5 or above
//for older browsers you can try the non-standard fred.__proto__
if (Object.getPrototypeOf) {
	log( Object.getPrototypeOf(fred) ); //Person
}

fred.study();
fred.work();

log(fred instanceof Person); //true

//This is false, because Javascript only has a single prototype property,
//and it was already set to Person.prototype  
log(fred instanceof Employee); //false


//Order of precedence

var a = {x: 'a'};
var b = {x: 'b'};
var c = {x: 'c'};

mixin(a, b, c);
log(a.x); //c

function A() {}
A.prototype.x = 'a';
function B() {}
B.prototype = extend(A.prototype, {x: 'b'});
function C() {}
C.prototype = extend(B.prototype, {x: 'c'});

var c = new C();
log(c.x); //c

</script>
